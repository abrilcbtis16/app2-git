(function(){var h;var g;var d;var f;var c;var e;var b={};var a=Liferay.Analytics.integration("LiferayAnalyticsProcessor").readyOnInitialize();a.prototype._ready=true;a.prototype.flush=function(k){var i=this;var j=i.getPendingEvents();d=false;if(j.length){if(h){h(e,{data:{events:JSON.stringify(j),themeDisplayData:JSON.stringify(b)},on:{failure:function(l){console.error(l.type)},success:function(){if(g(k)){k()}}}});i.store([]);f=clearInterval(f)}else{d=true}}};a.prototype.getPendingEvents=function(){var i=this;var j=localStorage.getItem("ct-analytics-events")||"[]";return JSON.parse(j)};a.prototype.initialize=function(){var i=this;c=i.options.interval;e=i.options.uri;AUI().use("aui-io-request",function(j){j.Object.each(themeDisplay,function(l,k){if(j.Lang.isFunction(l)){var m=/^(get|is)(.*)$/.exec(k)[2];m=m[0].toLowerCase()+m.slice(1);b[m]=themeDisplay[k]()}});g=j.Lang.isFunction;h=j.io.request})};a.prototype.store=function(j){var i=this;j=j||[];localStorage.setItem("ct-analytics-events",JSON.stringify(j))};a.prototype.track=function(l,k){var i=this;var j=i.getPendingEvents();j.push(l.obj);i.store(j);if(!f){f=setTimeout(i.flush.bind(i),c)}};Liferay.Analytics.addIntegration(a)})();